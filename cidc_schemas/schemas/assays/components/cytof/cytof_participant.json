{
    "$schema": "metaschema/strict_meta_schema.json#",
    "$id": "cytof_participant",
    "title": "CyTOF particpiant record",
    "type": "object",
    "description": "A data record for a single participant from CyTOF assay batch.",

    "additionalProperties": false,
    "properties": {
        "cimac_participant_id": {
            "$comment": "Id of a participant within this clinical trial, that this assay record is based upon.",
            "$ref": "participant.json#properties/cimac_participant_id"
        },
        "debarcoding_key": {
            "description": "An ID that maps to the specific isotope labeling scheme in the debarcoding protocol.",
            "type": "string"
        },
        "preprocessing_notes": {
            "description": "Any notes pertaining to preprocessing of CyTOF data.",
            "type": "string"
        },
        "control": {
            "type": "object",
            "description": "A single data record from CyTOF assay batch.",
            "additionalProperties": false,
            "properties": {
                "concatenation_version": {
                    "description": "Concatenation of FCS files into a single FCS version number.",
                    "type": "string"
                },
                "normalization_version": {
                    "description": "Version of normalization for CyTOF assay batch.",
                    "type": "string"
                },
                "debarcoding_key": {
                    "description": "An ID that maps to the specific isotope labeling scheme in the debarcoding protocol.",
                    "type": "string"
                },
                "preprocessing_notes": {
                    "description": "Any notes pertaining to preprocessing of CyTOF data.",
                    "type": "string"
                },
                "input_files": {
                    "$ref": "assays/components/cytof/cytof_input.json"
                },
                "output_files": {
                    "$ref": "assays/components/cytof/cytof_analysis.json"
                }
            },
            "mergeStrategy": "objectMerge",
            "required": [
                "input_files"
            ]
        },
        "samples": {
            "type": "array",
            "items": {
                "$ref": "assays/components/cytof/cytof_entry.json"
            },
            "mergeStrategy": "arrayMergeById",
            "mergeOptions": {
              "idRef": "cimac_id"
            }
        }
    },
    "mergeStrategy": "objectMerge",
    "required": [
        "cimac_participant_id",
        "samples",
        "control"
    ]
}

