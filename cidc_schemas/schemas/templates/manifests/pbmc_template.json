{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "pbmc_shipping",
    "title": "Shipping manifest for PBMC samples",
    "type": "object",
    "category": "manifest",
    "description": "Shipping / receiving manifest for transferring PBMC samples.\n",
    "properties": {
        "worksheets": {
            "Shipment": {
                "prism_preamble_object_schema": "clinical_trial.json",
                "prism_preamble_object_pointer": "/shipments/0",
                "prism_data_object_pointer": "/shipped",
                "preamble_rows": {
                    "protocol id": {
                        "merge_pointer": "2/protocol_id",
                        "type_ref": "clinical_trial.json#properties/protocol_id"
                    },
                    "manifest id": {
                        "merge_pointer": "/manifest_id",
                        "type_ref": "shipping_core.json#properties/manifest_id"
                    },
                    "request": {
                        "merge_pointer": "/request",
                        "type_ref": "shipping_core.json#properties/request"
                    },
                    "assay priority": {
                        "merge_pointer": "/assay_priority",
                        "type_ref": "shipping_core.json#properties/assay_priority"
                    },
                    "assay type": {
                        "merge_pointer": "/assay_type",
                        "type_ref": "shipping_core.json#properties/assay_type"
                    },
                    "batch number": {
                        "merge_pointer": "/batch_number",
                        "type_ref": "shipping_core.json#properties/batch_number"
                    },
                    "box number": {
                        "merge_pointer": "/box_number",
                        "type_ref": "shipping_core.json#properties/box_number"
                    },
                    "assay run number": {
                        "merge_pointer": "/assay_run_number",
                        "type_ref": "shipping_core.json#properties/assay_run_number"
                    },
                    "courier": {
                        "merge_pointer": "/courier",
                        "type_ref": "shipping_core.json#properties/courier"
                    },
                    "tracking number": {
                        "merge_pointer": "/tracking_number",
                        "type_ref": "shipping_core.json#properties/tracking_number"
                    },
                    "account number": {
                        "merge_pointer": "/account_number",
                        "type_ref": "shipping_core.json#properties/account_number"
                    },
                    "shipping condition": {
                        "merge_pointer": "/shipping_condition",
                        "type_ref": "shipping_core.json#properties/shipping_condition"
                    },
                    "date shipped": {
                        "merge_pointer": "/date_shipped",
                        "type_ref": "shipping_core.json#properties/date_shipped"
                    },
                    "date recieved": {
                        "merge_pointer": "/date_recieved",
                        "type_ref": "shipping_core.json#properties/date_recieved"
                    },
                    "quality of shipment": {
                        "merge_pointer": "/quality_of_shipment",
                        "type_ref": "shipping_core.json#properties/quality_of_shipment"
                    },
                    "num of samples shipped": {
                        "merge_pointer": "/num_of_samples_shipped",
                        "type_ref": "shipping_core.json#properties/num_of_samples_shipped"
                    },
                    "num of samples good": {
                        "merge_pointer": "/num_of_samples_good",
                        "type_ref": "shipping_core.json#properties/num_of_samples_good"
                    },
                    "num of path report": {
                        "merge_pointer": "/num_of_path_report",
                        "type_ref": "shipping_core.json#properties/num_of_path_report"
                    },
                    "ship from": {
                        "merge_pointer": "/ship_from",
                        "type_ref": "shipping_core.json#properties/ship_from"
                    },
                    "ship to": {
                        "merge_pointer": "/ship_to",
                        "type_ref": "shipping_core.json#properties/ship_to"
                    }
                }
            },

            "Essential Patient Data": {
                "prism_preamble_object_schema": "clinical_trial.json",
                "prism_preamble_object_pointer": "#",
                "prism_data_object_pointer": "/participants/0/samples/0",
                "data_columns": {
                    "Path Concordance Verification": {
                        "cimac id": {
                            "merge_pointer": "/cimac_id",
                            "type_ref": "sample.json#properties/cimac_id",
                            "process_as": [
                                {
                                    "merge_pointer": "2/cimac_participant_id",
                                    "parse_through": "lambda x: '-'.join(x.split('-')[:3])"
                                }
                            ]
                        },
                        "collection event name": {
                            "merge_pointer": "/collection_event_name",
                            "type_ref": "sample.json#properties/collection_event_name"
                        }
                    },
                    "ICD-0-3 Code/Description": {
                        "Site Description": {
                            "merge_pointer": "/site_description",
                            "type_ref": "sample.json#properties/site_description"
                        },
                        "Topography Code": {
                            "merge_pointer": "/topography_code",
                            "type_ref": "sample.json#properties/topography_code"
                        },
                        "Topography Description": {
                            "merge_pointer": "/topography_description",
                            "type_ref": "sample.json#properties/topography_description"
                        },
                        "Histology/Behavior": {
                            "merge_pointer": "/histology_behavior",
                            "type_ref": "sample.json#properties/histology_behavior"
                        },
                        "Histology/Behavior Description": {
                            "merge_pointer": "/histology_behavior_description",
                            "type_ref": "sample.json#properties/histology_behavior_description"
                        }
                    },
                    "Demographics": {
                        "Sex": {
                            "merge_pointer": "2/gender",
                            "type_ref": "participant.json#properties/gender"
                        },
                        "Race": {
                            "merge_pointer": "2/race",
                            "type_ref": "participant.json#properties/race"
                        },
                        "Ethnic Group": {
                            "merge_pointer": "2/ethnicity",
                            "type_ref": "participant.json#properties/ethnicity"
                        }
                    }
                }
            },

            "Samples": {
                "prism_preamble_object_schema": "clinical_trial.json",
                "prism_preamble_object_pointer": "#",
                "prism_data_object_pointer": "/participants/0/samples/0",
                "data_columns": {
                    "Filled by Biorepository": {
                        "participant id": {
                            "merge_pointer": "2/participant_id",
                            "type_ref": "participant.json#properties/participant_id"
                        },
                        "cohort name": {
                            "merge_pointer": "2/cohort_name",
                            "type_ref": "participant.json#properties/cohort_name"
                        },
                        "arm id": {
                            "merge_pointer": "2/arm_id",
                            "type_ref": "participant.json#properties/arm_id"
                        },
                        "parent sample id": {
                            "merge_pointer": "0/parent_sample_id",
                            "type_ref": "sample.json#properties/parent_sample_id"
                        },
                        "processed sample id": {
                            "merge_pointer": "/processed_sample_id",
                            "type_ref": "sample.json#properties/processed_sample_id"
                        },
                        "cimac id": {
                            "merge_pointer": "/cimac_id",
                            "type_ref": "sample.json#properties/cimac_id",
                            "process_as": [
                                {
                                    "merge_pointer": "2/cimac_participant_id",
                                    "parse_through": "lambda x: '-'.join(x.split('-')[:3])"
                                }
                            ]
                        },
                        "collection event name": {
                            "merge_pointer": "0/collection_event_name",
                            "type_ref": "sample.json#properties/collection_event_name"
                        },
                        "genomic source": {
                            "merge_pointer": "0/genomic_source",
                            "type_ref": "sample.json#properties/genomic_source"
                        },
                        "blood collection date": {
                            "merge_pointer": "0/blood_collection_date",
                            "type_ref": "sample.json#properties/blood_collection_date"
                        },
                        "blood collection time": {
                            "merge_pointer": "0/blood_collection_time",
                            "type_ref": "sample.json#properties/blood_collection_time"
                        },
                        "blood processing date": {
                            "merge_pointer": "0/blood_processing_date",
                            "type_ref": "sample.json#properties/blood_processing_date"
                        },
                        "blood processing time": {
                            "merge_pointer": "0/blood_processing_time",
                            "type_ref": "sample.json#properties/blood_processing_time"
                        },
                        "sample processing compliance": {
                            "merge_pointer": "/sample_processing_compliance",
                            "type_ref": "sample.json#properties/sample_processing_compliance"
                        },
                        "sample location": {
                            "merge_pointer": "0/sample_location",
                            "type_ref": "sample.json#properties/sample_location"
                        },
                        "type of sample": {
                            "merge_pointer": "0/type_of_sample",
                            "type_ref": "sample.json#properties/type_of_sample"
                        },
                        "sample collection procedure": {
                            "merge_pointer": "/sample_collection_procedure",
                            "type_ref": "sample.json#properties/sample_collection_procedure"
                        },
                        "type of primary container": {
                            "merge_pointer": "0/type_of_primary_container",
                            "type_ref": "sample.json#properties/type_of_primary_container"
                        },
                        "quantity": {
                            "merge_pointer": "/quantity",
                            "type_ref": "aliquot.json#properties/quantity"
                        },
                        "sample volume": {
                            "merge_pointer": "/sample_volume",
                            "type_ref": "sample.json#properties/sample_volume"
                        },
                        "sample volume units": {
                            "merge_pointer": "/sample_volume_units",
                            "type_ref": "sample.json#properties/sample_volume_units"
                        },
                        "pbmc frozen": {
                            "merge_pointer": "/pbmc_frozen",
                            "type_ref": "sample.json#properties/pbmc_frozen"
                        }
                    },
                    "Filled by CIMAC Lab": {
                        "pbmc recovered": {
                            "merge_pointer": "/pbmc_recovered",
                            "type_ref": "sample.json#properties/pbmc_recovered"
                        },
                        "material used": {
                            "merge_pointer": "/material_used",
                            "type_ref": "sample.json#properties/material_used"
                        },
                        "material remaining": {
                            "merge_pointer": "/material_remaining",
                            "type_ref": "sample.json#properties/material_remaining"
                        },
                        "sample replacement": {
                            "merge_pointer": "/sample_replacement",
                            "type_ref": "sample.json#properties/sample_replacement"
                        },
                        "residual sample use": {
                            "merge_pointer": "/residual_sample_use",
                            "type_ref": "sample.json#properties/residual_sample_use"
                        },
                        "comments": {
                            "merge_pointer": "/comments",
                            "type_ref": "sample.json#properties/comments"
                        }
                    }
                }
            }
        }
    }
}