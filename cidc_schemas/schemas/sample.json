{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "sample",
  "title": "Sample",
  "type": "object",
  "description": "Any material sample taken from a biological entity for testing, diagnostic, propagation, treatment or research purposes, including a sample obtained from a living organism or taken from the biological object after halting of all its life functions. Biospecimen can contain one or more components including but not limited to cellular molecules, cells, tissues, organs, body fluids, embryos, and body excretory products.",
  "properties": {
    "cimac_id": {
      "description": "Specimen identifier assigned by the CIMAC-CIDC Network. Formated as CM-????-????-??",
      "in_doc_ref_pattern": "/participants/*/samples/*/cimac_id",
      "$comment": "With `in_doc_ref_pattern` here, there's no need to specify it each time cimac_id is $ref'ed, constrain will be pulled in place by ref resolver automatically, assuring that it will be checked for every cimac_id $ref.",
      "pattern": "^CM-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{2}$",
      "example": "CM-TEST-PA01-A1",
      "type": "string"
    },
    "site_sample_id": {
      "description": "Sample identifier assigned by the biorepository site. Example: EA123-45.",
      "type": "string"
    },
    "time_point": {
      "title": "Time Point",
      "description": "Study related collection time point, as described in the protocol intake form. Example: Progression.",
      "type": "string"
    },
    "blood_collection_date": {
      "description": "Date of blood collection.",
      "type": "string",
      "format": "date"
    },
    "blood_collection_time": {
      "description": "Time of blood collection.",
      "type": "string",
      "format": "time"
    },
    "blood_processing_date": {
      "description": "Date of blood processing.",
      "type": "string",
      "format": "date"
    },
    "blood_processing_time": {
      "description": "Time of blood processing.",
      "type": "string",
      "format": "time"
    },
    "sample_location": {
      "description": "Sample location within the shipping container. Example: A1.",
      "type": "string"
    },
    "sample_source": {
      "$comment": "RECHECK Moved here from aliquot level.",
      "description": "Indicates the specimen source of the sample shipped. Example: Na Heparin blood draw aliquots (2 of three), FFPE block #52",
      "type": "string"
    },
    "specimen_type": {
      "description": "Type of sample sent.",
      "type": "string",
      "enum": [
        "Core Needle Biopsy",
        "Surgical Resection",
        "Endoscopic Biopsy",
        "Punch Biopsy",
        "Plasma",
        "PBMC",
        "Whole Blood",
        "Stool Sample",
        "Bone Marrow Aspirate",
        "Other"
      ]
    },
    "specimen_format": {
      "description": "The format in which the sample was sent.",
      "type": "string",
      "enum": [
        "FFPE Block",
        "FFPE Scroll",
        "FFPE Core Punch",
        "Unstained Slide",
        "Frozen Tissue",
        "Sodium Heparin Green-Top Tube",
        "Streck Tube",
        "EDTA Tube",
        "Archival FFPE Block",
        "Archival FFPE Slides",
        "Archival FFPE Core Punch",
        "Archival FFPE Scroll",
        "Frozen Stool",
        "DNA-Preserved Stool",
        "Other"
      ]
    },
    "specimen_analyte": {
      "description": "The format of the substance to be measured.",
      "type": "string",
      "enum": ["H&E slide", "Unstained slide", "DNA", "RNA", "Protein Lysate"]
    },
    "tissue_type_submitted": {
      "description": "The type of tissue that was obtained for the study.",
      "type": "string",
      "enum": [
        "Primary Tumor",
        "Residual Tumor",
        "Recurrence",
        "Metastatic Tumor",
        "Lymph Node",
        "Bone Marrow",
        "Normal Adjacent",
        "Other"
      ]
    },
    "genomic_source": {
      "description": "The type of material submitted - tumor/normal/etc",
      "type": "string",
      "enum": ["Tumor", "Normal", "Metastasis"]
    },
    "aliquots": {
      "type": "array",
      "items": {
        "$ref": "aliquot.json"
      },
      "mergeStrategy": "arrayMergeById",
      "mergeOptions": {
        "idRef": "/slide_number"
      }
    }
  },
  "required": [
    "cimac_id",
    "site_sample_id",
    "time_point",
    "sample_location",
    "specimen_type",
    "specimen_format",
    "genomic_source"]
}
